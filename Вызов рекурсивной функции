namespaces={'global':None}
variables={'global':[]}
list=[]
numbers=int(input())

def recursive(space,var):
    if space in variables.keys(): 
        for key,value in variables.items():
            if var in variables.get(space):
                return space
            if var not in variables.get(space):
                return recursive(namespaces.get(space),var)
    elif space not in variables.keys():
      if space in namespaces.keys():
        return recursive(namespaces.get(space),var)
      if space not in namespaces.keys():
        return 'None'
         
for number in range(numbers):
    x=input().split()
    if x[0]=='create':
        namespaces[x[1]]=x[2]
    if x[0]=='add':
      if x[1] in variables:
        variables[x[1]].append(x[2])
      if x[1] not in variables:
        variables[x[1]]=[x[2]]
    if x[0]=='get':
        k=recursive(x[1],x[2])
        list.append(k)
for i in list:
  print(i)
